{
	"info": {
		"_postman_id": "94f78b00-d55c-4b3b-a960-1d9a62137c05",
		"name": "Event Website API",
		"description": "Postman collection for Event Website API endpoints (Users, Events, Transactions, Migrations, Seeds). Includes password update flow requiring old_password, and sample environment variable usage.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26579092",
		"_collection_link": "https://sample-team-6541.postman.co/workspace/mini-project~ad9a439f-d282-4c0f-a807-88941d568729/collection/26579092-94f78b00-d55c-4b3b-a960-1d9a62137c05?action=share&source=collection_link&creator=26579092"
	},
	"item": [
		{
			"name": "Health",
			"item": [
				{
					"name": "Root Hello World",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status is 200', () => pm.response.code === 200);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Create User",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.variables.set('timestamp', Date.now());"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Created',()=>pm.response.code===201);",
									"const json=pm.response.json();",
									"pm.test('No password field exposed',()=>!json.data.password);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"user_{{timestamp}}\",\n  \"password\": \"Testpass123\",\n  \"role\": 1,\n  \"referral_code\": \"d382ebf2-3624-4b90-bd88-1b60b1ba63f0\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User By ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK',()=>pm.response.code===200);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update User (Username)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Updated',()=>pm.response.code===200);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"bintang\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Password (Requires old_password)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Password updated',()=>pm.response.code===200);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"password\": \"Newpass4567\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User Points List",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK',()=>pm.response.code===200);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/points",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"points"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User Points Sum",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK',()=>pm.response.code===200);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/points/sum",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"points",
								"sum"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User Coupons",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK',()=>pm.response.code===200);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/coupons",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"coupons"
							]
						}
					},
					"response": []
				}
			],
			"description": "User management: create, get, update (with old_password verification), points, coupons."
		},
		{
			"name": "Events",
			"item": [
				{
					"name": "List Events",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK',()=>pm.response.code===200);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/events/list?created_by=1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events",
								"list"
							],
							"query": [
								{
									"key": "category",
									"value": null,
									"disabled": true
								},
								{
									"key": "start_date",
									"value": null,
									"disabled": true
								},
								{
									"key": "created_by",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Event By UUID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Could be 200 or 404',()=>[200,404].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/events/{{eventUuid}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events",
								"{{eventUuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Event",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Created',()=>pm.response.code===201);",
									"const json=pm.response.json(); if(json.data){pm.collectionVariables.set('eventUuid', json.data.uuid);} "
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Sample Event\",\n  \"start_date\": \"2025-12-01T10:00:00.000Z\",\n  \"end_date\": \"2025-12-01T12:00:00.000Z\",\n  \"available_seats\": 100,\n  \"description\": \"Demo event\",\n  \"created_by\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/events",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Ticket for Event",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Created',()=>pm.response.code===201);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"price\": 0\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/events/{{eventUuid}}/tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events",
								"{{eventUuid}}",
								"tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Event Vouchers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK or Empty',()=>[200,404].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/events/{{eventUuid}}/vouchers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events",
								"{{eventUuid}}",
								"vouchers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Event Voucher",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Created',()=>pm.response.code===201);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_date\": \"2025-12-01T10:00:00.000Z\",\n  \"end_date\": \"2025-12-10T10:00:00.000Z\",\n  \"code\": \"PROMO100\",\n  \"discount_type\": \"fixed\",\n  \"discount_amount\": 100\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/events/{{eventUuid}}/vouchers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events",
								"{{eventUuid}}",
								"vouchers"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Transactions",
			"item": [
				{
					"name": "Create Transaction",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Created or error',()=>[201,400,404].includes(pm.response.code));",
									"if(pm.response.code===201){const j=pm.response.json();pm.collectionVariables.set('transactionUuid', j.data.uuid);} "
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"event_id\": 1,\n  \"ticket_ids\": {\n    \"1\": 1\n  },\n  \"created_by\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/transactions",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Transaction By UUID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK or Not Found',()=>[200,404].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/transactions/{{transactionUuid}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"transactions",
								"{{transactionUuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Transaction Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Updated or Error',()=>[200,400,404].includes(pm.response.code));"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\":3\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/transactions/{{transactionUuid}}/status",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"transactions",
								"{{transactionUuid}}",
								"status"
							]
						}
					},
					"response": []
				},
				{
					"name": "Upload Image",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Updated or Error',()=>[200,400,404].includes(pm.response.code));"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"image_url\": \"a\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/transactions/{{transactionUuid}}/upload_image",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"transactions",
								"{{transactionUuid}}",
								"upload_image"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Tickets For Transaction",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('OK or Not Found',()=>[200,404].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/transactions/{{transactionUuid}}/tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"transactions",
								"{{transactionUuid}}",
								"tickets"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Migrations",
			"item": [
				{
					"name": "Run Migrations Up",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Either success or failure payload',()=>[200,500].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/migration_up",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"migration_up"
							]
						}
					},
					"response": []
				},
				{
					"name": "Run Migrations Down",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Either success or failure payload',()=>[200,500].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/migration_down",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"migration_down"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Seeds",
			"item": [
				{
					"name": "Run Seeds Up",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Multi-status possible',()=>[200,207,500].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/seed_up",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"seed_up"
							]
						}
					},
					"response": []
				},
				{
					"name": "Run Seeds Down",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Multi-status possible',()=>[200,207,500].includes(pm.response.code));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/seed_down",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"seed_down"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Reviews",
			"item": [
				{
					"name": "Create Review",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"rating\": 5,\n  \"comment\": \"It's good\",\n  \"created_by\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/events/{{eventUuid}}/reviews",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"events",
								"{{eventUuid}}",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Reviews by Event Created By",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/reviews",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"reviews"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Attendees",
			"item": [
				{
					"name": "Get All Attendees",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/attendees",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"attendees"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "eventUuid",
			"value": ""
		},
		{
			"key": "transactionUuid",
			"value": ""
		}
	]
}